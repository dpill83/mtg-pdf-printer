{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./CardGrid.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const CARD_WIDTH=220;// px\nconst CardGrid=_ref=>{let{cards,loading,onSelectPrinting,onPrint,printing,onAddOne,onRemoveOne}=_ref;const[imgErrors,setImgErrors]=useState([]);const[activeCardIndex,setActiveCardIndex]=useState(null);// Dismiss overlay if clicking outside any card\nuseEffect(()=>{if(activeCardIndex===null)return;const handleClick=e=>{if(!e.target.closest('.card-item-wrapper')){setActiveCardIndex(null);}};document.addEventListener('mousedown',handleClick);return()=>document.removeEventListener('mousedown',handleClick);},[activeCardIndex]);if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"card-grid-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading cards...\"})});}if(!cards||cards.length===0){return/*#__PURE__*/_jsx(\"div\",{className:\"card-grid-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"no-cards\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No cards to display. Enter a decklist above to see the preview.\"})})});}// Show all cards in the preview grid\nconst previewCards=cards;// no slicing, show all\nconst handleImgError=index=>{setImgErrors(prev=>{const updated=[...prev];updated[index]=true;return updated;});};return/*#__PURE__*/_jsxs(\"div\",{className:\"card-grid-container mt-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-grid\",children:previewCards.map((card,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"card-item-wrapper\",style:{width:CARD_WIDTH},onClick:()=>setActiveCardIndex(index),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-item\",children:[!imgErrors[index]?/*#__PURE__*/_jsx(\"img\",{src:card.imageUrl,alt:card.name,className:\"card-image\",onError:e=>{handleImgError(index);}}):/*#__PURE__*/_jsx(\"div\",{className:\"card-placeholder\",children:/*#__PURE__*/_jsx(\"span\",{children:card.name})}),activeCardIndex===index&&/*#__PURE__*/_jsx(\"div\",{className:\"card-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"overlay-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"add-one-btn\",onClick:e=>{e.stopPropagation();onAddOne&&onAddOne(index);setActiveCardIndex(null);},children:\"+ Add One\"}),card.quantity>1&&/*#__PURE__*/_jsx(\"button\",{className:\"remove-one-btn\",onClick:e=>{e.stopPropagation();onRemoveOne&&onRemoveOne(index);setActiveCardIndex(null);},children:\"- Remove One\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-controls flex flex-row items-center justify-center mt-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"card-quantity-badge\",children:card.quantity}),card.printings&&card.printings.length>0&&/*#__PURE__*/_jsx(\"select\",{value:card.selectedPrintingId||card.printings[0].id,onChange:e=>onSelectPrinting(index,e.target.value),className:\"card-version-dropdown\",children:card.printings.map(printing=>/*#__PURE__*/_jsxs(\"option\",{value:printing.id,children:[printing.set_name,\" (\",printing.collector_number,\")\"]},printing.id))})]})]},index))}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center mt-8\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-primary\",onClick:onPrint,disabled:printing,children:printing?'Generating PDF...':/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"Print\",style:{marginRight:4},children:\"\\uD83D\\uDDA8\\uFE0F\"}),\"Print\"]})})})]});};export default CardGrid;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CARD_WIDTH","CardGrid","_ref","cards","loading","onSelectPrinting","onPrint","printing","onAddOne","onRemoveOne","imgErrors","setImgErrors","activeCardIndex","setActiveCardIndex","handleClick","e","target","closest","document","addEventListener","removeEventListener","className","children","length","previewCards","handleImgError","index","prev","updated","map","card","style","width","onClick","src","imageUrl","alt","name","onError","stopPropagation","quantity","printings","value","selectedPrintingId","id","onChange","set_name","collector_number","type","disabled","role","marginRight"],"sources":["C:/MTG/mtg-pdf-printer/src/components/CardGrid.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './CardGrid.css';\n\nconst CARD_WIDTH = 220; // px\n\nconst CardGrid = ({ cards, loading, onSelectPrinting, onPrint, printing, onAddOne, onRemoveOne }) => {\n  const [imgErrors, setImgErrors] = useState([]);\n  const [activeCardIndex, setActiveCardIndex] = useState(null);\n\n  // Dismiss overlay if clicking outside any card\n  useEffect(() => {\n    if (activeCardIndex === null) return;\n    const handleClick = (e) => {\n      if (!e.target.closest('.card-item-wrapper')) {\n        setActiveCardIndex(null);\n      }\n    };\n    document.addEventListener('mousedown', handleClick);\n    return () => document.removeEventListener('mousedown', handleClick);\n  }, [activeCardIndex]);\n\n  if (loading) {\n    return (\n      <div className=\"card-grid-container\">\n        <div className=\"loading\">Loading cards...</div>\n      </div>\n    );\n  }\n\n  if (!cards || cards.length === 0) {\n    return (\n      <div className=\"card-grid-container\">\n        <div className=\"no-cards\">\n          <p>No cards to display. Enter a decklist above to see the preview.</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Show all cards in the preview grid\n  const previewCards = cards; // no slicing, show all\n\n  const handleImgError = (index) => {\n    setImgErrors((prev) => {\n      const updated = [...prev];\n      updated[index] = true;\n      return updated;\n    });\n  };\n\n  return (\n    <div className=\"card-grid-container mt-6\">\n      <div className=\"card-grid\">\n        {previewCards.map((card, index) => (\n          <div\n            key={index}\n            className=\"card-item-wrapper\"\n            style={{ width: CARD_WIDTH }}\n            onClick={() => setActiveCardIndex(index)}\n          >\n            <div className=\"card-item\">\n              {!imgErrors[index] ? (\n                <img\n                  src={card.imageUrl}\n                  alt={card.name}\n                  className=\"card-image\"\n                  onError={(e) => {\n                    handleImgError(index);\n                  }}\n                />\n              ) : (\n                <div className=\"card-placeholder\">\n                  <span>{card.name}</span>\n                </div>\n              )}\n              {/* Overlay for Add/Remove buttons */}\n              {activeCardIndex === index && (\n                <div className=\"card-overlay\">\n                  <div className=\"overlay-buttons\">\n                  <button\n                    className=\"add-one-btn\"\n                    onClick={e => {\n                      e.stopPropagation();\n                      onAddOne && onAddOne(index);\n                      setActiveCardIndex(null);\n                    }}\n                  >+ Add One</button>\n                    {card.quantity > 1 && (\n                      <button\n                        className=\"remove-one-btn\"\n                        onClick={e => {\n                          e.stopPropagation();\n                          onRemoveOne && onRemoveOne(index);\n                          setActiveCardIndex(null);\n                        }}\n                      >- Remove One</button>\n                    )}\n                  </div>\n                </div>\n              )}\n            </div>\n            {/* Controls: dropdown and quantity badge */}\n            <div className=\"card-controls flex flex-row items-center justify-center mt-2\">\n              <span className=\"card-quantity-badge\">{card.quantity}</span>\n              {card.printings && card.printings.length > 0 && (\n                <select\n                  value={card.selectedPrintingId || card.printings[0].id}\n                  onChange={e => onSelectPrinting(index, e.target.value)}\n                  className=\"card-version-dropdown\"\n                >\n                  {card.printings.map((printing) => (\n                    <option key={printing.id} value={printing.id}>\n                      {printing.set_name} ({printing.collector_number})\n                    </option>\n                  ))}\n                </select>\n              )}\n            </div>\n          </div>\n        ))}\n      </div>\n      {/* Centered Print button at the bottom */}\n      <div className=\"flex justify-center mt-8\">\n        <button\n          type=\"button\"\n          className=\"btn btn-primary\"\n          onClick={onPrint}\n          disabled={printing}\n        >\n          {printing ? (\n            'Generating PDF...'\n          ) : (\n            <>\n              <span role=\"img\" aria-label=\"Print\" style={{ marginRight: 4 }}>üñ®Ô∏è</span>Print\n            </>\n          )}\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default CardGrid; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}